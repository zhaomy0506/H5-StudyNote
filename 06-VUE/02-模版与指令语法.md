# 模版语法

Vue模版语法分为两类:插值语法/指令语法

### 插值语法

功能:用于解析标签体内容

写法:`{{xxx}}`,内部`xxx`要写成js表达式,可以读取到data中所有的属性

# 指令语法

> 备注:Vue中有很多指令,且都是`v-???`形式

## 数据绑定

vue中有两种数据绑定的方式:

1. 单项绑定:`v-bind`,数据只能从data流向页面
   - `v-bind:属性名="xxx"`,简写`:属性名="xxx"`
   
   - `xxx`需要写成js表达式,可以动态指定任意一个属性的属性值
2. 双向绑定:`v-model`,数据从data流向页面,还可以从页面流向data
   - `v-model:value="xxx"`,简写`v-model="xxx"`,因为其默认收集value值
   
   - `v-model`指令只能用于表单类元素上(如:input,select...)

3. `v-model`指令的三个修饰符:
   1. `.lazy` 失去焦点后再收集数据
   2. `.number` 输入字符串转为有效的数字
   3. `.trim` 去除首位空格

## 收集表单数据

1. 对于文本框`（input type=“text”）`：使用`v-model`指令可以收集输入的值，即`value`属性的值。

2. 对于单选框`（input type=“radio”）`：需要给每个单选框设置一个`value`属性，`v-model`指令将会收集选中单选框的`value`值。

3. 对于复选框`（input type=“checkbox”）`：
   1. 没有配置input的value属性，`v-model`指令将会收集checkbox的checked属性的值（true/false）。
   2. 配置了input的value属性：
      - `v-model`的初始值为非数组,那么收集的就是checked的值
      - `v-model`的初始值是数组,那么收集的就是value值

## 事件绑定

1. 使用`v-on:xxx`简写`@xxx`,都可以绑定事件,`xxx`为事件名

2. 事件的回调需要配置在`methods`对象中,最终会出现在Vue实例对象上

3. `methods`中配置的函数,都是被Vue所管理的函数,this指向Vue实例

4. `@click='demo'`与`@click='demo($event)'`,效果一致,后者可以传参

### 事件修饰符(总共六个)

1. `.prevent` 阻止默认事件(*)
2. `.stop` 阻止事件冒泡(*)
3. `.once` 事件只能被触发一次(*)
4. `.capture` 事件捕获阶段触发事件
5. `.self` 只有event.target是当前操作的Dom时,才会触发事件
6. `.passive` 事件的默认行为立即执行,无需等待事件回调执行完毕直接执行

### 键盘事件修饰符:

Vue中给常见的按键起了别名

1. `enter` => 回车
2. `delete` => 删除(捕获回车和delete)
3. `esc` => 退出
4. `space` => 空格
5. `tab` => 换行(特殊,需配合keydown使用)
6. `up`/`down`/`left`/`right` => 上下左右

Vue未提供别名的按键,可以使用按键的key值绑定,需注意kebab-case(短横线命名法)

系统修饰键(用法特殊),ctrl,alt,shift,win

1. 配合keyup使用,按下修饰键的同时,需要配合其它按键使用
2. 配合keydown使用,正常触发

> ***修饰符可以链式调用***
>
> 需要自定义别名,可以添加配置,`Vue.config.keyCodes.xxx`

## 条件渲染指令

v-for指令

1. 用于展示列表数据

2. 语法:

   - `v-for='(item,index) in xxx' :key:'yyy'`

   - `v-for='(item,index) of xxx' :key:'yyy'`

3. 可以遍历数据:数组,对象,字符串,指定次数

### v-for中的key

1. 虚拟DOM中的key作用

   key是虚拟DOM对象的标识,当状态中的数据发生变化时,Vue会根据新数据生成新的虚拟DOM

   随后使用新虚拟DOM与旧虚拟DOM进行差异比较,规则如下:

2. 对比规则:

   1. 旧虚拟DOM中找到了与新虚拟DOM相同的key

      1. 若虚拟DOM中内容不变,直接使用之前的真实DOM
      2. 若虚拟DOM中改变,则生成新真实DOM,随后替换掉之前页面的真实DOM

   2. 旧虚拟DOM中未找到与新虚拟DOM相同的key

      则直接创建新的真实DOM,随后渲染到页面

3. 用index作为key可能会引发的问题

   1. 若对数据进行:逆序添加,逆序删除等破坏性操作:

      会产生没有必要的真实DOM更新 => 页面展示效果无问题,但效率低下

   2. 若结构中还包含输入类的DOM

      会产生错误的DOM更新 => 页面效果会出现问题

4. 开发中如何选择key?

   1. 最好使用每条数据的唯一标识,比如id,手机号,身份证号,学号等唯一值

   2. 若不存在对数据的逆序添加、删除等破坏性操作，仅用于页面渲染列表用于展示

      也可以使用index作为key，这样是没有问题的
