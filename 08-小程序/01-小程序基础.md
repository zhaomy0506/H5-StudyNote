# 微信小程序基础笔记 📚

## 目录结构

```
├── utils              公共的工具函数
├── pages              不同页面的文件夹
│   ├── index          主页文件夹
│   │   ├── index.js   主页面逻辑
│   │   └── ...
├── static (assets)    静态资源文件夹
├── app.js             小程序入口文件，初始化和全局数据管理
├── app.json           小程序全局配置，页面路径、窗口样式等
├── app.wxss           全局样式文件
├── sitemap.json       小程序页面路径配置，优化搜索引擎爬取
...
```

- 在 `utils` 文件夹中，通常存放着与数据处理、网络请求、日期格式化等有关的公共工具函数。
- 在 `static`（或 `assets`）文件夹中，你可以放置小程序使用的静态资源，如图片、图标、样式文件等。

## 常用标签

在小程序中，常见的标签有：

- `<view>`：类似于 `div` 标签，用于布局。
- `<text>`：类似于 `p` 标签，用于渲染文本。
- `<image>`：类似于 `img` 标签，用于显示图片。需要注意在小程序中使用网络资源或 base64 格式图片。

> **注意：** 官方建议避免在小程序中存放大文件，如图片、字体文件、视频等，以避免影响性能和加载速度。

## 页面逻辑与数据绑定

每个小程序页面都有对应的 `.js` 文件，用于定义页面的逻辑。主要涉及以下内容：

1. **生命周期方法**：小程序页面有一系列生命周期方法，如 `onLoad`、`onShow`、`onHide` 等，用于管理页面的状态和行为。

2. **数据管理**：将页面所需的数据存放在 `data` 属性中，类似于 Vue 中的数据绑定。使用 `this.setData()` 方法更新数据，以触发视图的更新。

## 列表渲染

使用 `wx:for="{{}}"` 可以进行列表渲染。示例如下：

```html
<view wx:for="{{items}}" wx:key="index">
  <text>索引: {{index}}, 值: {{item}}</text>
</view>
```

**说明：**

- 使用 `wx:key` 属性来指定列表中每个项的唯一标识，提高渲染性能和准确性。

- 会自动生成两个变量 `item` 和 `index`，用于遍历列表。

- `vx:for-item=''` 指定item变量名

- `vx:for-index=''` 指定index变量名

## 创建新页面

如果需要创建新页面，只需在 `pages` 文件夹中创建一个新的页面文件夹，并配置页面相关信息

## 条件渲染

使用 `wx:if`、`wx:elif`、`wx:else` 进行条件渲染，以及使用 `hidden` 属性隐藏元素

```html
<view wx:if="{{isTrue}}">这是真的</view>
<view wx:else>这是假的</view>
<view hidden="{{isHidden}}">根据条件隐藏的内容</view>
```

## 样式绑定

class绑定:

```html
<view class="{{isRed ? 'red-text' : ''}}">这段文字可能是红色的</view>
```

style样式绑定:

```html
<view style="{{color= isRed? 'red' : ''}}">这段文字可能是红色的</view>
```



## 小程序事件

### 事件类型

- `tap`：触摸后立即离开。
- `longpress`：触摸后超过 350ms 后离开，会阻止 `tap` 事件触发。
- `touchstart`：触摸开始。
- `touchmove`：触摸后移动。
- `touchcancel`：触摸动作被中断，如来电提醒、弹窗等。
- `touchend`：触摸结束。

### 事件触发

- `capture-bind`：捕获阶段触发。
- `capture-catch`：捕获阶段触发，并中断事件，不再向下传播，即中断捕获阶段，并取消随后的冒泡阶段。
- `bind`：冒泡阶段触发。
- `catch`：冒泡阶段触发，并取消事件进一步向上冒泡


### 传递参数

```html
<!-- 通过自定义属性传递参数-->
<view bindtap="handleTap" data-id="{{itemId}}">点击我</view>
```

```js
Page({
  handleTap: function(e) {
    const itemId = e.currentTarget.dataset.id;//获取参数
    console.log('点击了项目ID：', itemId);
  }
});
```

- 使用其他方法可以直接使用 `this.xxx`，

- 获取数据则使用 `this.data.xxx`

## 尺寸单位

使用 `rpx` 单位可以适配不同屏幕，实现跨设备的布局。公式为：`750 * 设计稿元素宽度 / 设计稿宽度`。

```html
<view style="width: 375rpx;">在 iPhone 6 上宽度为 375px</view>
<view style="font-size: 32rpx;">字体大小会适配不同屏幕</view>
```

## 全局对象

- `wx`：小程序全局对象，用于管理小程序的各种功能。
- `wx.setStorageSync`：本地数据存储方法，类似于浏览器的本地存储。
- `wx.getStorageSync`：获取本地存储的数据。
- # `wx.request`：发起网络请求的方法，可以实现与后端的数据交互。
